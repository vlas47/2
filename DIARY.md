# Дневник разработки

## 2025?12?02

- Подключил проект к PostgreSQL: вынес параметры в `settings.py`, установил `psycopg`, прогнал миграции Django.
- Создал набор специализированных приложений (новостройки, вторичка, загород, администрирование) и переработал главную страницу: теперь это промо Петербурга с историей компании и достижениями.
- Запустил служебный модуль `realestate`, импортировал полный XML?фид Setl (10?752 объектов) и настроил команду `import_setl`, которая подтягивает все ключевые поля.
- Переработал таблицу в служебном разделе: добавил фильтры, сортировку, отображение фото, площадей, идентификаторов из файла, возможность показывать только объекты с фотографиями.
- Обновил модель `RealtyOffer`, расширив её десятками дополнительных полей (цены, площади, характеристики дома, резервные поля), пересоздал базу и повторно загрузил XML.
- Допилил интерфейс: объединил адрес с метро/районом, вынес тип и название объекта, добавил колонку с фотографиями, список площадей и фильтр <Только с фото>.
- Начал вести данный дневник и оформлять описание проекта.
- Добавил режим карточек `/realestate/cards/` с переключателем, кешированием полного XML в памяти и расширенными карточками (планировка, площади, этаж/готовность, отделка, статусы, фото).

> При дальнейшей работе добавляй записи в этот файл в формате <дата - ключевые действия>, чтобы вся история изменений была под рукой.

## 2025-02-02

- Вынес инфо-хедер с показателями «Всего в базе / По фильтру» наверх страниц карточек и таблицы, рядом добавил кнопки процедур: чистка фото, чистка дублей и импорт Setl_XML.
- Оформил кнопки как формы с визуальным индикатором выполнения; для импорта добавил поле ввода пути (по умолчанию Setl_XML) и CSRF.
- Убрал дублирующие кнопки процедур из фильтров, оставив там только поиск и сброс.
- Поддержал стили для хедера и форм действий, чтобы кнопки и поле ввода выглядели аккуратно и не ломали вёрстку.

## 2025-12-03

- Добавил загрузку XML в таблицу и карточки вместо ручного пути, убрал лишние подписи в хедерах.
- Включил пагинацию карточек (10 на страницу) и навигацию, кнопки возврата на главную в таблице и карточках.
- Настроил HTTPS (certbot), nginx+gunicorn, статика отдается корректно.
- Обновил главную: крупная CTA «Поиск недвижимости», убрал лишние ссылки, хедер разнесён по колонкам.
- Подготовил роли «Администратор»/«Менеджер», миграция создает admin/admin как суперпользователя, вход через `/admin-panel/login/`, защищен доступ в админку; компактная форма входа.
